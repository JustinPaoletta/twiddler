<!DOCTYPE html>
<html>

<head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
</head>

<body>
    <script>

    //This is what creates the Twiddler Feed

    $(document).ready(function home() {
        var $body = $('body');
        $body.html('');
        var moreButton = $('<button>More Twiddles</button>');
        moreButton.appendTo($body);
        $('body').css('background-color', '#9370DB');
        $(moreButton).click(() => { home() })

        var index = streams.home.length - 1;
        console.log(streams.home);
        while (index >= 0) {
            var tweet = streams.home[index];
            var $tweet = $('<div></div>');
            $($tweet).css('text-align', 'center');
            $($tweet).css('background-color', 'white');
            $($tweet).css('width', '50vw');
            $($tweet).css('margin-left', '25vw');
            $($tweet).css('height', '10vh');
            $($tweet).css('margin-top', '3vh');
            $($tweet).css('border', 'solid 2px #4B0082');
            console.log('This is the Time Created ' + tweet.created_at);
            var fullTime = tweet.created_at.toString();
            var time = fullTime.replace('GMT-0500 (Eastern Standard Time)', 'EST');
            $tweet.text('@' + tweet.user + ': ' + tweet.message).css('padding-top', '3vh');
            $($tweet).append("<br/><br/>" + time);
            $tweet.appendTo($body);  
            index -= 1;
        }


        // This shows the users tweets that you clicked on and creates a button to return home 

        $('div').click(function() {
          
            let allText = $(this).html();

            function moreTwiddles(){

                $body.html('');

                var homeButton = $('<button>Twiddler Feed</button>');
                homeButton.appendTo($body);

                var moreUserTweetsButton = $('<button>More User Twiddles</button>');
                moreUserTweetsButton.appendTo($body);

                // Trying to get more user specific tweets;

                if (allText.includes('douglascalhoun')) {
                    setInterval(() => {console.log(streams.users.douglascalhoun)}, 2000);
                    var index = streams.users.douglascalhoun.length - 1;

                    while (index >= 0) {
                        var $tweet = $('<div></div>');
                        $($tweet).css('text-align', 'center');
                        $($tweet).css('background-color', 'white');
                        $($tweet).css('width', '50vw');
                        $($tweet).css('margin-left', '25vw');
                        $($tweet).css('height', '10vh');
                        $($tweet).css('margin-top', '3vh');
                        $($tweet).css('border', 'solid 2px #4B0082');
                        $tweet.text('@' + streams.users.douglascalhoun[index].user + ': ' + streams.users.douglascalhoun[index].message).css('padding-top', '3vh');
                        $tweet.appendTo($body);
                        index -= 1;
                    }

                }

                if (allText.includes('@mracus')) {
                    console.log(streams.users.mracus);
                    var index = streams.users.mracus.length - 1;

                    while (index >= 0) {
                        var $tweet = $('<div></div>');
                        $($tweet).css('text-align', 'center');
                        $($tweet).css('background-color', 'white');
                        $($tweet).css('width', '50vw');
                        $($tweet).css('margin-left', '25vw');
                        $($tweet).css('height', '10vh');
                        $($tweet).css('margin-top', '3vh');
                        $($tweet).css('border', 'solid 2px #4B0082');
                        $tweet.text('@' + streams.users.mracus[index].user + ': ' + streams.users.mracus[index].message).css('padding-top', '3vh');
                        $tweet.appendTo($body);
                        index -= 1;
                    }
                }

                if (allText.includes('@sharksforcheap')) {
                    console.log(streams.users.sharksforcheap);
                    var index = streams.users.sharksforcheap.length - 1;

                    while (index >= 0) {
                        var $tweet = $('<div></div>');
                        $($tweet).css('text-align', 'center');
                        $($tweet).css('background-color', 'white');
                        $($tweet).css('width', '50vw');
                        $($tweet).css('margin-left', '25vw');
                        $($tweet).css('height', '10vh');
                        $($tweet).css('margin-top', '3vh');
                        $($tweet).css('border', 'solid 2px #4B0082');
                        $tweet.text('@' + streams.users.sharksforcheap[index].user + ': ' + streams.users.sharksforcheap[index].message).css('padding-top', '3vh');
                        $tweet.appendTo($body);
                        index -= 1;
                    }
                }

                if (allText.includes('@shawndrost')) {
                    console.log(streams.users.shawndrost);
                    var index = streams.users.shawndrost.length - 1;

                    while (index >= 0) {
                        var $tweet = $('<div></div>');
                        $($tweet).css('text-align', 'center');
                        $($tweet).css('background-color', 'white');
                        $($tweet).css('width', '50vw');
                        $($tweet).css('margin-left', '25vw');
                        $($tweet).css('height', '10vh');
                        $($tweet).css('margin-top', '3vh');
                        $($tweet).css('border', 'solid 2px #4B0082');
                        $tweet.text('@' + streams.users.shawndrost[index].user + ': ' + streams.users.shawndrost[index].message).css('padding-top', '3vh');
                        $tweet.appendTo($body);
                        index -= 1;
                    }
                }

                $(homeButton).click(() => { home() });
                $(moreUserTweetsButton).click(() => { moreTwiddles() });

            }

            moreTwiddles();
            
        });

    });
    </script>
</body>

</html>